{"ts":1370112689649,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":true,"ts":1370112692715,"patch":[[{"diffs":[[1,"<?php\n  require_once(\"socrata.php\");\n\n  $view_uid = array_get(\"view_uid\", $_POST);\n  $data_site = array_get(\"data_site\", $_POST);\n  $app_token = array_get(\"app_token\", $_POST);\n  $response = NULL;\n  if($view_uid != NULL && $data_site != NULL) {\n    // Create a new unauthenticated client\n    $socrata = new Socrata(\"http://$data_site/api\", $app_token);\n\n    $params = array();\n    $row_ids_only = array_get(\"row_ids_only\", $_POST);\n    if($row_ids_only != NULL && $row_ids_only == \"on\") {\n      $params[\"row_ids_only\"] = \"true\";\n      $row_ids_only = true;\n    }\n    if(array_get(\"max_rows\", $_POST) != NULL && array_get(\"max_rows\", $_POST) > 0) {\n      $params[\"max_rows\"] = array_get(\"max_rows\", $_POST);\n    }\n\n    // Request rows from the DC Hospitals view\n    $response = $socrata->get(\"/views/$view_uid/rows.json\", $params);\n  }\n?>\n<html>\n  <head>\n    <title>Socrata API PHP Example</title>\n  </head>\n  <body>\n    <h1>Socrata API PHP Example</h1>\n\n    <?php if($response == NULL) { ?>\n      <form action=\"index.php\" method=\"post\">\n        <label for=\"data_site\">Data Site:</label>\n        <select name=\"data_site\">\n          <option value=\"data.medicare.gov\" selected=\"true\">Data.Medicare.Gov</option>\n          <option value=\"data.seattle.gov\">Data.Seattle.Gov</option>\n          <option value=\"explore.data.gov\">Data.Gov</option>\n          <option value=\"opendata.go.ke\">OpenData.go.ke</option>\n          <option value=\"opendata.socrata.com\">Socrata</option>\n        </select><br/>\n\n        <label for=\"app_token\">App Token (<a href=\"http://dev.socrata.com/authentication\">details</a>)</label>\n        <input type=\"text\" name=\"app_token\" size=\"10\"/><br/>\n\n        <label for=\"view_uid\">View ID</label>\n        <input type=\"text\" name=\"view_uid\" size=\"10\"/><br/>\n\n        <label for=\"row_ids_only\">Return only row IDs:</label>\n        <input type=\"checkbox\" name=\"row_ids_only\"/><br/>\n\n        <label for=\"max_rows\">Return only # rows:</label>\n        <input type=\"text\" name=\"max_rows\" size=\"4\"/><br/>\n\n        <input type=\"submit\" value=\"Submit\"/>\n      </form>\n    <?php } else { ?>\n      <h2><?= $response[\"meta\"][\"view\"][\"name\"] ?></h2>\n      <p><?= $response[\"meta\"][\"view\"][\"description\"] ?></p>\n\n      <?# Create a table for our actual data ?>\n      <table border=\"1\">\n        <tr>\n          <?# Print header row ?>\n          <?php foreach($response[\"meta\"][\"view\"][\"columns\"] as $column) { ?>\n            <th><?= $column[\"name\"] ?></th>\n          <?php } ?>\n        </tr>\n        <?# Print rows ?>\n        <?php foreach($response[\"data\"] as $row) { ?>\n          <tr>\n            <?php if($row_ids_only == true) { ?>\n              <td><?= $row ?></td>\n            <?php } else { ?>\n              <?php foreach($row as $cell) { ?>\n                <td><?= $cell ?></td>\n              <?php } ?>\n            <?php } ?>\n          </tr>\n        <?php } ?>\n      </table>\n\n      <h3>Raw Response</h3>\n      <pre><?= var_dump($response) ?></pre>\n    <?php } ?>\n  </body>\n</html>\n\n"]],"start1":0,"start2":0,"length1":0,"length2":2988}]],"length":2988,"saved":false}
